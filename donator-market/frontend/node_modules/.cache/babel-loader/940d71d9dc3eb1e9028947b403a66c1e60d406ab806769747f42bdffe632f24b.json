{"ast":null,"code":"import _slicedToArray from\"C:/Donator-Market/donator-market-docker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import{Container,Card,Row,Col,Button}from'react-bootstrap';import'./Main.css';import Pagination from'react-js-pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MainList(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),testStr=_useState2[0],setTestStr=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageNum=_useState4[0],setPageNum=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),itemCount=_useState6[0],setItemCount=_useState6[1];// 변수 초기화\nfunction callback(str){setTestStr(str);}useEffect(function(){axios({url:'/main',method:'GET',params:{\"pageNum\":pageNum}}).then(function(res){callback(res.data);setItemCount(res.data.itemCount);console.log(res.data);if(res.data.problem!=false){alert(\"화면을 불러오는데 문제가 발생하였습니다.\");}});},[]);var arr=[];for(var i=0;i<Math.ceil(itemCount/9);i++){arr.push(i+1);}var prevPage=function prevPage(e){e.preventDefault();if(pageNum===0){alert(\"첫번째 페이지 입니다.\");}else{setPageNum(pageNum-1);axios({url:'/main',method:'GET',params:{\"pageNum\":pageNum-1}}).then(function(res){callback(res.data);console.log(\"prevPage \",res.data.itemsObj[0].pageNum);});}};var nextPage=function nextPage(pageNum,e){e.preventDefault();if(pageNum>=Math.ceil(itemCount/9)-1){alert(\"마지막 페이지입니다.\");}else{setPageNum(pageNum+1);console.log(\"after \",pageNum);axios({url:'/main',method:'GET',params:{\"pageNum\":pageNum+1}}).then(function(res){callback(res.data);console.log(\"nextPage \",res.data.itemsObj[0].pageNum);});}};var clickPage=function clickPage(arr,e){e.preventDefault();setPageNum(arr);console.log(arr);axios({url:'/main',method:'GET',params:{\"pageNum\":arr}}).then(function(res){callback(res.data);console.log(\"nextPage \",res.data.itemsObj[0].pageNum);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[testStr.items&&testStr.items.map(function(item){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Card,{className:\"card\",children:/*#__PURE__*/_jsxs(\"a\",{href:item.id,children:[/*#__PURE__*/_jsx(\"img\",{className:\"card-img-top\",src:\"https://shopitemimage.s3.ap-northeast-2.amazonaws.com/itemImg/\"+item.oriImgName}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:item.dtl}),/*#__PURE__*/_jsx(\"h3\",{class:\"card-title text-danger\",children:item.stockNumber})]})]})},item.id)});}),/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination justify-content-center\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",disabled:pageNum==0?true:false,href:'?page='+pageNum,type:\"button\",onClick:prevPage,children:\"Previous\"})}),arr.map(function(arr){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",href:'?page='+(arr-1),onClick:function onClick(e){return clickPage(arr-1,e);},children:arr})})});}),/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",disabled:pageNum+1==pageNum?true:false,href:'?page='+pageNum,type:\"button\",onClick:function onClick(e){return nextPage(pageNum,e);},children:\"Next\"})})]})})})]});}export default MainList;","map":{"version":3,"names":["React","useState","useEffect","axios","Container","Card","Row","Col","Button","Pagination","MainList","testStr","setTestStr","pageNum","setPageNum","itemCount","setItemCount","callback","str","url","method","params","then","res","data","console","log","problem","alert","arr","i","Math","ceil","push","prevPage","e","preventDefault","itemsObj","nextPage","clickPage","items","map","item","id","oriImgName","name","dtl","stockNumber"],"sources":["C:/Donator-Market/donator-market-docker/frontend/src/main/MainList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios'\nimport 'bootstrap/dist/css/bootstrap.min.css';  \nimport {Container ,Card,Row, Col, Button} from 'react-bootstrap';  \nimport './Main.css';\nimport Pagination from 'react-js-pagination';\n\nfunction MainList() {\n\n\n    const [ testStr, setTestStr ] = useState('');\n    const[pageNum, setPageNum] = useState(0);\n    const [itemCount, setItemCount] = useState(0);\n\n    // 변수 초기화\n    function callback(str) {\n    setTestStr(str);\n    }\n\n    \n    useEffect(\n        () => {\n         axios({\n            url: '/main',\n            method: 'GET',\n            params: {\n                \"pageNum\": pageNum\n            }\n        }).then((res) => {\n            callback(res.data);\n            setItemCount(res.data.itemCount);\n            console.log(res.data)\n            if(res.data.problem != false) {\n                alert(\"화면을 불러오는데 문제가 발생하였습니다.\");\n            }\n        })\n        }, []\n); \n\nlet arr = []\nfor(let i = 0 ; i < Math.ceil(itemCount/9) ; i++) {\n    arr.push(i+1)\n}\n\n        const prevPage = (e) => {\n            e.preventDefault();\n            if (pageNum === 0) {\n                alert(\"첫번째 페이지 입니다.\")\n            } else {\n                setPageNum(pageNum - 1);\n                axios({\n                    url: '/main',\n                    method: 'GET',\n                    params: {\n                        \"pageNum\": pageNum-1\n                    }\n                }).then((res) => {\n                    callback(res.data);\n                    console.log(\"prevPage \", res.data.itemsObj[0].pageNum);\n                })\n            }\n        }\n    \n        const nextPage = (pageNum, e) => {\n            e.preventDefault();\n            if(pageNum >= Math.ceil(itemCount/9) - 1) {\n                alert(\"마지막 페이지입니다.\")\n            } else {\n                setPageNum(pageNum + 1);\n                console.log(\"after \", pageNum)\n                axios({\n                    url: '/main',\n                    method: 'GET',\n                    params: {\n                        \"pageNum\": pageNum+1\n                    }\n                }).then((res) => {\n                    callback(res.data);\n                    console.log(\"nextPage \", res.data.itemsObj[0].pageNum);\n                })\n            }\n        }\n\n        const clickPage = (arr, e) => {\n            e.preventDefault();\n            setPageNum(arr)\n            console.log(arr)\n            axios({\n                url: '/main',\n                method: 'GET',\n                params: {\n                    \"pageNum\": arr\n                }\n            }).then((res) => {\n                callback(res.data);\n                console.log(\"nextPage \", res.data.itemsObj[0].pageNum);\n            })\n        }\n   \n    return(\n        <>\n            {testStr.items && testStr.items.map((item) => {\n                return(\n                    <>\n                    \n                        <Card className=\"card\" key={item.id}>\n                            <a href={item.id}>\n                                <img className=\"card-img-top\" src={\"https://shopitemimage.s3.ap-northeast-2.amazonaws.com/itemImg/\"+item.oriImgName} />\n                                <div className=\"card-body\">\n                                    <h4 className=\"card-title\">{item.name}</h4>\n                                    <p className=\"card-text\">{item.dtl}</p>\n                                    <h3 class=\"card-title text-danger\">{item.stockNumber}</h3>\n                                </div>\n                            </a>\n                        </Card>\n                    </>\n                );\n            })}\n                    <>\n\n                    <div>\n                        <ul className='pagination justify-content-center'>\n\n                        <li className='page-item'>\n                            <a className='page-link'  disabled={pageNum==0?true:false} \n                            href={'?page='+ (pageNum)} type='button'\n                            onClick={prevPage}\n                            >Previous\n                            </a>\n                        </li>\n                        {arr.map((arr) => {\n                            return(\n                                <>\n                            <li className='page-item'>\n                                    <a className='page-link'\n                                    href={'?page=' + (arr-1)} \n                                    onClick={(e) => clickPage(arr-1, e)}\n                                    >{arr} \n                                    </a>\n                                </li>\n                                </>\n                            )\n                        })}\n\n                        <li className='page-item'>\n                            <a className=\"page-link\"  disabled={(pageNum+1)==pageNum?true:false } \n                            href={'?page=' + (pageNum)} type='button'\n                            onClick={(e)=>nextPage(pageNum, e)} \n                            >Next\n                            </a>\n                        </li>\n                    </ul>\n                    </div>\n                    </>             \n\n           \n\n        </>\n    );\n}\n\nexport default MainList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}